<!-- app/views/cases/show.html.erb -->
<h1><%= @case.title %></h1>

<!-- Navbar -->
<nav>
  <ul>
    <li><a href="#" class="nav-link" data-section="text-section">Texto</a></li>
    <li><a href="#" class="nav-link" data-section="videos-section">Videos</a></li>
    <li><a href="#" class="nav-link" data-section="documents-section">Documentos</a></li>
    <li><a href="#" class="nav-link" data-section="audios-section">Audios</a></li>
  </ul>
</nav>

<!-- Sections -->
<div id="text-section" class="content-section">
  <div class="justified-text">
    <p><%= sanitize @case.description, tags: %w(p strong em a ul ol li) %></p>
  </div>
  <p>
    <% if @case.main_image.attached? %>
      <%= image_tag url_for(@case.main_image), alt: @case.title %>
    <% end %>
  </p>
</div>

<div id="videos-section" class="content-section" style="display:none;">
  <% @case.videos.each do |video| %>
    <div>
      <body1><%= video.title %></body1>
      <div class="video-container">
        <iframe width="560" height="315" src="<%= video.url %>" frameborder="0" allowfullscreen></iframe>
      </div>
    </div>
  <% end %>
</div>

<div id="documents-section" class="content-section" style="display:none;">
  <% @case.documents.each do |document| %>
    <div>
      <% if document.file.attached? %>
        <h2>
          <%= link_to document.title, url_for(document.file), download: document.title %>
        </h2>
      <% else %>
        <h2><%= document.title %></h2>
        <p>No document available.</p>
      <% end %>
    </div>
  <% end %>
</div>

<div id="audios-section" class="content-section" style="display:none;">
  <% @case.audios.each do |audio| %>
    <div>
      <% if audio.url.present? %>
        <iframe src="<%= audio.url %>" width="300" height="380" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe>
      <% elsif audio.file.attached? %>
        <p>
          <%= link_to audio.title, url_for(audio.file), download: audio.title %>
        </p>
      <% else %>
        <p>No audio available.</p>
      <% end %>
    </div>
  <% end %>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function() {
    const navLinks = document.querySelectorAll(".nav-link");
    const sections = document.querySelectorAll(".content-section");

    navLinks.forEach(link => {
      link.addEventListener("click", function(event) {
        event.preventDefault();
        const sectionId = this.getAttribute("data-section");

        sections.forEach(section => {
          section.style.display = "none";
        });

        document.getElementById(sectionId).style.display = "block";
      });
    });
  });
</script>

<style>
  body {
    font-family: 'Poppins', sans-serif;
  }

  nav {
    margin-bottom: 20px;
  }
  nav ul {
    list-style-type: none;
    padding: 0;
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
  }
  nav ul li {
    display: inline;
  }
  nav ul li a {
    text-decoration: none;
    padding: 8px 16px;
    background-color: #007bff;
    color: white;
    border-radius: 4px;
    display: block;
  }
  nav ul li a:hover {
    background-color: #0056b3;
  }

  .justified-text {
    text-align: justify;
  }

  .video-container {
    position: relative;
    padding-bottom: 56.25%; /* 16:9 aspect ratio */
    height: 0;
  }
  .video-container iframe {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
  }

  h1 {
    color: #6C6C6C;
    font-size: 2.2rem;
    font-weight: 600;
  }

  body1 {
    color: "#7fab3a";
    font-size: 0.9rem;
    font-weight: 400;
  }

  @media (max-width: 768px) {
    nav ul {
      flex-direction: column;
      gap: 5px;
    }
    nav ul li a {
      text-align: center;
    }
  }
</style>
